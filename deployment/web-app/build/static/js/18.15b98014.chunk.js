(this["webpackJsonpdocumentary-management"]=this["webpackJsonpdocumentary-management"]||[]).push([[18],{495:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(3),i=n(5),o=n(109),l=n(7),r=n(6),s=n(0),c=n.n(s),d=n(31),h=n(1),u=n.n(h),m=(n(513),c.a.createContext()),v=function(e){Object(l.a)(n,e);var t=Object(r.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this,e)).state={isValid:void 0,validates:[]},i.handleStateChange=i.handleStateChange.bind(Object(o.a)(i)),i.handleFieldChange=i.handleFieldChange.bind(Object(o.a)(i)),i.handleValidateField=i.handleValidateField.bind(Object(o.a)(i)),i.getFieldValid=i.getFieldValid.bind(Object(o.a)(i)),i}return Object(i.a)(n,[{key:"handleStateChange",value:function(e){this.setState({isValid:e}),void 0!=this.props.onStateChange&&this.props.onStateChange(e)}},{key:"handleValidateField",value:function(e){var t=this.state.validates;(null===t||void 0===t?void 0:t.find((function(t){return t.field===e.field})))?t.forEach((function(t){t.field===e.field&&(t.valid=e.valid)})):t.push(e),this.setState({validates:t})}},{key:"handleFieldChange",value:function(e,t){"VALID"!==t.status&&"INVALID"!==t.status||this.handleValidateField({field:t.field,valid:"VALID"===t.status})}},{key:"componentDidMount",value:function(){var e=this;this.instance=u()(Object(d.findDOMNode)(this)).bootstrapValidator(this.props.options||{}).on("success.form.bv",(function(t,n){e.handleStateChange(!0)})).on("error.form.bv",(function(t,n){e.handleStateChange(!1)})).on("success.field.bv",(function(e,t){})).on("error.field.bv",(function(e,t){})).on("status.field.bv",(function(t,n){e.handleFieldChange(t,n)})).on("success.validator.bv",(function(e,t){})).on("error.validator.bv",(function(e,t){})).data("bootstrapValidator")}},{key:"isValid",value:function(){var e=u()(Object(d.findDOMNode)(this)).data("bootstrapValidator");return e.validate(),e.isValid()}},{key:"resetForm",value:function(){u()(Object(d.findDOMNode)(this)).data("bootstrapValidator").resetForm()}},{key:"getFieldValid",value:function(e){var t=u()(Object(d.findDOMNode)(this)).data("bootstrapValidator");return void 0==t||null==this.state.validates.find((function(t){return t.field===e}))?null:t.isValidField(e)}},{key:"render",value:function(){var e=this;return c.a.createElement(m.Provider,{value:{state:this.state,isValid:function(t){return e.getFieldValid(t)}}},this.props.children)}}]),n}(c.a.Component);v.defaultProps={options:{},onStateChange:function(){},onFieldChange:function(){}},t.b=v},496:function(e,t,n){"use strict";var a=n(81);n.d(t,"c",(function(){return a.b}));var i=n(29);n.d(t,"a",(function(){return i.a}));n(90);var o=n(126);n.d(t,"b",(function(){return o.a})),n.d(t,"d",(function(){return o.b}))},498:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return l}));var a=n(53),i=n.n(a);function o(e,t,n){return/^[\d\w_]+$/.test(e)}function l(e,t,n){return null==e||void 0==e||""==e.trim()||10==e.length&&i()(e,"DD/MM/YYYY").isValid()}},500:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={color:"darken"}},501:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(3),i=n(5),o=n(7),l=n(6),r=n(0),s=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(a.a)(this,n);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).form=void 0,e.divForm=void 0,e.validator=void 0,e}return Object(i.a)(n,[{key:"handleSave",value:function(){var e;void 0!=this.form?null===(e=this.form)||void 0===e||e.dispatchEvent(new Event("submit")):void 0!=this.divForm&&this.onSubmit()}},{key:"create",value:function(e){this.setState({isShow:!0,model:e||{},id:0,isEdit:!1})}},{key:"edit",value:function(e,t){this.setState({isShow:!0,model:t,id:e,isEdit:!0})}},{key:"handleClose",value:function(){this.setState({isShow:!1}),void 0!==this.props.onCancle&&this.props.onCancle()}},{key:"handleInputChange",value:function(e){var t=this.state.model||{},n=e.target.name,a="checkbox"===e.target.type?e.target.checked:e.target.value;t[n]=a,this.setState({model:t})}}]),n}(r.Component)},508:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n(3),i=n(5),o=n(109),l=n(7),r=n(6),s=n(0),c=n.n(s),d=n(506),h=n.n(d),u=[],m=function(e){Object(l.a)(n,e);var t=Object(r.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this,e)).dataGrid=void 0,i.onSelectionChanged=i.onSelectionChanged.bind(Object(o.a)(i)),i.onToolbarPreparing=i.onToolbarPreparing.bind(Object(o.a)(i)),i.handlePrintClick=i.handlePrintClick.bind(Object(o.a)(i)),i}return Object(i.a)(n,[{key:"onSelectionChanged",value:function(e){if("single"===this.props.selectionMode){var t,n,a,i;if(null===(t=e.component)||void 0===t?void 0:t.option("customSelection"))return;null===(n=e.component)||void 0===n||n.option("customSelection",!0),null===(a=e.component)||void 0===a||a.selectRows(void 0!==e.currentSelectedRowKeys?e.currentSelectedRowKeys[0]:void 0,!1),null===(i=e.component)||void 0===i||i.option("customSelection",!1)}void 0!==this.props.onSelectionChanged&&this.props.onSelectionChanged(e)}},{key:"refresh",value:function(){var e;null===(e=this.dataGrid)||void 0===e||e.instance.refresh()}},{key:"addNewRow",value:function(){void 0!==this.props.onAddNewRowCustom&&this.props.onAddNewRowCustom()}},{key:"handlePrintClick",value:function(){void 0!==this.props.onPrinting&&this.props.onPrinting()}},{key:"onToolbarPreparing",value:function(e){var t,n,a,i,o,l,r,s;(null===(t=e.toolbarOptions)||void 0===t||null===(n=t.items)||void 0===n||n.forEach((function(e){"dxButton"===e.widget&&u.indexOf(e.name)<0&&(e.location="before")})),!0===this.props.usePrint)&&(null===(o=e.toolbarOptions)||void 0===o||null===(l=o.items)||void 0===l||l.unshift({location:"before",widget:"dxButton",options:{icon:"print",onClick:this.handlePrintClick}}));(null===(a=e.toolbarOptions)||void 0===a||null===(i=a.items)||void 0===i||i.unshift({location:"before",widget:"dxButton",options:{icon:"refresh",onClick:this.refresh.bind(this)}}),!0===!this.props.removeButtonAdd)&&(null===(r=e.toolbarOptions)||void 0===r||null===(s=r.items)||void 0===s||s.unshift({location:"before",widget:"dxButton",options:{icon:"plus",onClick:this.addNewRow.bind(this)}}));void 0!==this.props.onToolbarPreparing&&this.props.onToolbarPreparing(e)}},{key:"render",value:function(){var e=this,t={};"none"!==this.props.selectionMode&&(t={mode:"multiple",selectAllMode:"page",allowSelectAll:"multiple"===this.props.selectionMode,showCheckBoxesMode:"always"});var n={showBorders:!0,remoteOperations:!0,rowAlternationEnabled:!0,showRowLines:!0,loadPanel:{text:"\u0110ang t\u1ea3i..."},noDataText:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u",selection:t,customSelection:!1,filterRow:{visible:!0},searchPanel:{visible:!0,width:350,placeholder:"T\xecm ki\u1ebfm..."},stateStoring:{type:"localStorage",enabled:!0,storageKey:this.props.gridName},columnChooser:{enabled:!0,title:"Ch\u1ecdn c\u1ed9t",mode:"select",emptyPanelText:"Kh\xf4ng c\xf3 c\u1ed9t n\xe0o"},columnResizingMode:"nextColumn",allowColumnResizing:!0,columnAutoWidth:!0},a=Object.assign({},n,this.props.customEditing?{editing:{allowAdding:!0,allowUpdating:!0,allowDeleting:!0,mode:"row",confirmDelete:!0,selectTextOnEditStart:!0,useIcons:!0}}:{},this.props,{onSelectionChanged:this.onSelectionChanged,onToolbarPreparing:this.onToolbarPreparing,onInitialized:function(t){var n;null===(n=t.element)||void 0===n||n.classList.add("dx-datagrid-smart"),void 0!==e.props.onInitialized&&e.props.onInitialized(t)}});return c.a.createElement(h.a,Object.assign({ref:function(t){return e.dataGrid=t||void 0}},a),this.props.children,!0===this.props.customEditing?c.a.createElement(d.Editing,a.editing):null,c.a.createElement(d.Paging,{defaultPageSize:10}),c.a.createElement(d.Pager,{showPageSizeSelector:!0,showNavigationButtons:!0,visible:!0,showInfo:!0,allowedPageSizes:[5,10,25,50,100]}))}}]),n}(s.Component)},555:function(e,t,n){"use strict";var a=n(3),i=n(7),o=n(6),l=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(){return Object(a.a)(this,n),t.call(this,"id","province")}return n}(n(125).b);t.a=new l},852:function(e,t,n){"use strict";n.r(t);var a,i=n(3),o=n(5),l=n(7),r=n(6),s=n(0),c=n.n(s),d=n(47),h=n(50),u=n(506),m=n(555),v=n(496),p=n(508),f=n(133),b=n(199),g=n(500),E=function(){function e(t){if(Object(i.a)(this,e),this.code=void 0,this.name=void 0,this.description=void 0,this.level=void 0,this.creationId=void 0,this.creationDate=void 0,t)for(var n in t)t.hasOwnProperty(n)&&(this[n]=t[n]);else this.code="",this.description="",this.level="",this.name=""}return Object(o.a)(e,[{key:"init",value:function(e){e&&(this.code=e.code,this.name=e.name,this.description=e.description,this.level=e.level,this.creationId=e.creationId,this.creationDate=e.creationDate?new Date(e.creationDate.toString()):void 0)}},{key:"toJSON",value:function(e){return(e="object"===typeof e?e:{}).code=this.code,e.name=this.name,e.description=this.description,e.level=this.level,e.creationId=this.creationId,e.creationDate=this.creationDate?this.creationDate.toISOString():void 0,e}}],[{key:"fromJS",value:function(t){t="object"===typeof t?t:{};var n=new e;return n.init(t),n}}]),e}(),C=n(488),y=n(495),w=n(501),S={feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{code:{group:".col-md-10",validators:{notEmpty:{message:"B\u1ea1n ch\u01b0a nh\u1eadp m\xe3 t\u1ec9nh"},stringLength:{max:50,message:"Nh\u1eadp t\u1ed1i \u0111a 50 k\xfd t\u1ef1"},callback:{message:"M\xe3 ch\u1ec9 bao g\u1ed3m ch\u1eef s\u1ed1, ch\u1eef c\xe1i v\xe0 d\u1ea5u g\u1ea1ch d\u01b0\u1edbi",callback:n(498).a}}},name:{group:".col-md-10",validators:{notEmpty:{message:"B\u1ea1n ch\u01b0a nh\u1eadp t\xean t\u1ec9nh"},stringLength:{max:250,message:"Nh\u1eadp t\u1ed1i \u0111a 250 k\xfd t\u1ef1"}}},level:{group:".col-md-10",validators:{notEmpty:{message:"B\u1ea1n ch\u01b0a nh\u1eadp c\u1ea5p t\u1ec9nh th\xe0nh"},stringLength:{max:250,message:"Nh\u1eadp t\u1ed1i \u0111a 250 k\xfd t\u1ef1"}}},description:{group:".col-md-10",validators:{stringLength:{max:2e3,message:"Nh\u1eadp t\u1ed1i \u0111a 2000 k\xfd t\u1ef1"}}}}},O=function(e){Object(l.a)(n,e);var t=Object(r.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={isShow:!1,model:a.props.model||{},id:a.props.id,isEdit:!1},a}return Object(o.a)(n,[{key:"onSubmit",value:function(e){var t;null===e||void 0===e||e.preventDefault(),(null===(t=this.validator)||void 0===t?void 0:t.isValid())?void 0!==this.props.onSave&&this.props.onSave(this.state.id||0,this.state.model):Object(b.a)("Th\xf4ng b\xe1o","D\u1eef li\u1ec7u nh\u1eadp ch\u01b0a ch\xednh x\xe1c","error","fa fa-remove")}},{key:"render",value:function(){var e=this;return c.a.createElement(C.a,{show:this.state.isShow,onHide:function(){return e.setState({isShow:!1})}},c.a.createElement(C.a.Header,{closeButton:!0},c.a.createElement(C.a.Title,null,this.state.isEdit?"C\u1eadp nh\u1eadt":"Th\xeam m\u1edbi "," t\u1ec9nh th\xe0nh")),c.a.createElement(C.a.Body,null,c.a.createElement(y.b,{ref:function(t){return e.validator=t||void 0},options:S},c.a.createElement("div",{ref:function(t){return e.divForm=t||void 0},className:"form-horizontal"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"control-label col-md-2"},"M\xe3 t\u1ec9nh",c.a.createElement("span",{className:"text-required"},"(*)")),c.a.createElement("div",{className:"col-md-10"},c.a.createElement("input",{type:"text",onChange:this.handleInputChange.bind(this),value:this.state.model.code,name:"code",className:"form-control"}))),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"control-label col-md-2"},"T\xean t\u1ec9nh",c.a.createElement("span",{className:"text-required"},"(*)")),c.a.createElement("div",{className:"col-md-10"},c.a.createElement("input",{type:"text",onChange:this.handleInputChange.bind(this),name:"name",value:this.state.model.name,className:"form-control"}))),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"control-label col-md-2"},"C\u1ea5p",c.a.createElement("span",{className:"text-required"},"(*)")),c.a.createElement("div",{className:"col-md-10"},c.a.createElement("input",{type:"text",onChange:this.handleInputChange.bind(this),name:"level",value:this.state.model.level,className:"form-control"}))),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{className:"control-label col-md-2"},"Ghi ch\xfa"),c.a.createElement("div",{className:"col-md-10"},c.a.createElement("textarea",{rows:4,onChange:this.handleInputChange.bind(this),name:"description",value:this.state.model.description,className:"form-control"})))))),c.a.createElement(C.a.Footer,null,c.a.createElement("button",{type:"button",className:"btn btn-info",onClick:this.handleSave.bind(this)},c.a.createElement("i",{className:"fa fa-save"})," L\u01b0u l\u1ea1i"),c.a.createElement("button",{type:"button",className:"btn btn-default",onClick:this.handleClose.bind(this)},c.a.createElement("i",{className:"fa fa-remove"})," \u0110\xf3ng")))}}]),n}(w.a),k=m.a.GetAspNetDataSource(),N=Object(d.b)(h.a.BreadcrumbStore)(a=Object(d.c)(a=function(e){Object(l.a)(n,e);var t=Object(r.a)(n);function n(e){var a,o;return Object(i.a)(this,n),(o=t.call(this,e)).dataGrid=void 0,o.editComponent=void 0,null===(a=o.props.breadcrumbStore)||void 0===a||a.setItems(["Danh m\u1ee5c","T\u1ec9nh th\xe0nh"]),o}return Object(o.a)(n,[{key:"componentDidMount",value:function(){}},{key:"onGridEditData",value:function(e){var t,n=Object.assign({},e.data);null===(t=this.editComponent)||void 0===t||t.edit(n.id,n)}},{key:"onGridDeleteData",value:function(e){var t=this,n=Object.assign({},e.data);Object(f.confirm)("B\u1ea1n c\xf3 mu\u1ed1n x\xf3a b\u1ea3n ghi n\xe0y kh\xf4ng?","X\xf3a t\u1ec9nh th\xe0nh").then((function(e){e&&m.a.delete(n.id).then((function(){var e;Object(b.a)("Th\xf4ng b\xe1o","X\xf3a d\u1eef li\u1ec7u th\xe0nh c\xf4ng","success"),null===(e=t.dataGrid)||void 0===e||e.refresh()}))}))}},{key:"handleAdNewRow",value:function(){var e,t=new E;null===(e=this.editComponent)||void 0===e||e.create(t)}},{key:"handleSave",value:function(e,t){var n=this;e>0?m.a.update(t).then((function(){var e,t;Object(b.a)("","C\u1eadp nh\u1eadt t\u1ec9nh th\xe0nh th\xe0nh c\xf4ng","success"),null===(e=n.dataGrid)||void 0===e||e.refresh(),null===(t=n.editComponent)||void 0===t||t.handleClose()})):m.a.create(t).then((function(){var e,t;Object(b.a)("","Th\xeam m\u1edbi t\u1ec9nh th\xe0nh th\xe0nh c\xf4ng","success"),null===(e=n.dataGrid)||void 0===e||e.refresh(),null===(t=n.editComponent)||void 0===t||t.handleClose()}))}},{key:"render",value:function(){var e,t,n=this;return c.a.createElement("div",{id:"content"},1==(null===(e=this.props.breadcrumbStore)||void 0===e?void 0:e.useBigBreadcrum)?c.a.createElement("div",{className:"row"},c.a.createElement(v.a,{items:["Danh m\u1ee5c","T\u1ec9nh th\xe0nh"],icon:"fa fa-fw fa-table"}),1==(null===(t=this.props.breadcrumbStore)||void 0===t?void 0:t.useBigBreadcrum)?c.a.createElement(v.c,null):null):null,c.a.createElement(v.d,null,c.a.createElement("div",{className:"row"},c.a.createElement("article",{className:"col-sm-12"},c.a.createElement(v.b,{id:"wid-id-list-tinh-thanh",editbutton:!1,color:g.a.color,refresh:!0},c.a.createElement("header",null,c.a.createElement("span",{className:"widget-icon"},c.a.createElement("i",{className:"fa fa-table"})),c.a.createElement("h2",null,"Danh s\xe1ch t\u1ec9nh th\xe0nh")),c.a.createElement("div",null,c.a.createElement("div",{className:"widget-body no-padding"},c.a.createElement(p.a,{ref:function(e){return n.dataGrid=e||void 0},gridName:"grid-tinh-thanh",onAddNewRowCustom:this.handleAdNewRow.bind(this),keyExpr:"id",customEditing:!1,dataSource:k,selectionMode:"single",onSelectionChanged:function(e){return console.log(e)}},c.a.createElement(u.Column,{dataField:"code",caption:"M\xe3 t\u1ec9nh",dataType:"string",width:100}),c.a.createElement(u.Column,{dataField:"name",caption:"T\xean t\u1ec9nh",dataType:"string"}),c.a.createElement(u.Column,{dataField:"description",caption:"Ghi ch\xfa",dataType:"string"}),c.a.createElement(u.Column,{dataField:"level",caption:"C\u1ea5p",dataType:"string"}),c.a.createElement(u.Column,{dataField:"id",caption:"Ch\u1ee9c n\u0103ng",width:100,alignment:"center",cellRender:function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{type:"button",onClick:n.onGridEditData.bind(n,e),className:"btn-sm btn btn-info btn-grid-func"},c.a.createElement("i",{className:"fa fa-pencil"})),c.a.createElement("button",{type:"button",onClick:n.onGridDeleteData.bind(n,e),className:"btn-sm btn btn-danger btn-grid-func"},c.a.createElement("i",{className:"fa fa-trash"})))},type:"buttons"})))))))),c.a.createElement(O,{ref:function(e){return n.editComponent=e||void 0},onSave:this.handleSave.bind(this)}))}}]),n}(s.Component))||a)||a;t.default=N}}]);