(this["webpackJsonpdocumentary-management"]=this["webpackJsonpdocumentary-management"]||[]).push([[17],{496:function(e,t,n){"use strict";var a=n(81);n.d(t,"c",(function(){return a.b}));var o=n(29);n.d(t,"a",(function(){return o.a}));n(90);var i=n(126);n.d(t,"b",(function(){return i.a})),n.d(t,"d",(function(){return i.b}))},500:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={color:"darken"}},505:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={DocumentaryAway:1,DocumentaryArrived:2,DocumentaryPersonal:3}},508:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(3),o=n(5),i=n(109),r=n(7),l=n(6),c=n(0),s=n.n(c),d=n(506),u=n.n(d),h=[],p=function(e){Object(r.a)(n,e);var t=Object(l.a)(n);function n(e){var o;return Object(a.a)(this,n),(o=t.call(this,e)).dataGrid=void 0,o.onSelectionChanged=o.onSelectionChanged.bind(Object(i.a)(o)),o.onToolbarPreparing=o.onToolbarPreparing.bind(Object(i.a)(o)),o.handlePrintClick=o.handlePrintClick.bind(Object(i.a)(o)),o}return Object(o.a)(n,[{key:"onSelectionChanged",value:function(e){if("single"===this.props.selectionMode){var t,n,a,o;if(null===(t=e.component)||void 0===t?void 0:t.option("customSelection"))return;null===(n=e.component)||void 0===n||n.option("customSelection",!0),null===(a=e.component)||void 0===a||a.selectRows(void 0!==e.currentSelectedRowKeys?e.currentSelectedRowKeys[0]:void 0,!1),null===(o=e.component)||void 0===o||o.option("customSelection",!1)}void 0!==this.props.onSelectionChanged&&this.props.onSelectionChanged(e)}},{key:"refresh",value:function(){var e;null===(e=this.dataGrid)||void 0===e||e.instance.refresh()}},{key:"addNewRow",value:function(){void 0!==this.props.onAddNewRowCustom&&this.props.onAddNewRowCustom()}},{key:"handlePrintClick",value:function(){void 0!==this.props.onPrinting&&this.props.onPrinting()}},{key:"onToolbarPreparing",value:function(e){var t,n,a,o,i,r,l,c;(null===(t=e.toolbarOptions)||void 0===t||null===(n=t.items)||void 0===n||n.forEach((function(e){"dxButton"===e.widget&&h.indexOf(e.name)<0&&(e.location="before")})),!0===this.props.usePrint)&&(null===(i=e.toolbarOptions)||void 0===i||null===(r=i.items)||void 0===r||r.unshift({location:"before",widget:"dxButton",options:{icon:"print",onClick:this.handlePrintClick}}));(null===(a=e.toolbarOptions)||void 0===a||null===(o=a.items)||void 0===o||o.unshift({location:"before",widget:"dxButton",options:{icon:"refresh",onClick:this.refresh.bind(this)}}),!0===!this.props.removeButtonAdd)&&(null===(l=e.toolbarOptions)||void 0===l||null===(c=l.items)||void 0===c||c.unshift({location:"before",widget:"dxButton",options:{icon:"plus",onClick:this.addNewRow.bind(this)}}));void 0!==this.props.onToolbarPreparing&&this.props.onToolbarPreparing(e)}},{key:"render",value:function(){var e=this,t={};"none"!==this.props.selectionMode&&(t={mode:"multiple",selectAllMode:"page",allowSelectAll:"multiple"===this.props.selectionMode,showCheckBoxesMode:"always"});var n={showBorders:!0,remoteOperations:!0,rowAlternationEnabled:!0,showRowLines:!0,loadPanel:{text:"\u0110ang t\u1ea3i..."},noDataText:"Kh\xf4ng c\xf3 d\u1eef li\u1ec7u",selection:t,customSelection:!1,filterRow:{visible:!0},searchPanel:{visible:!0,width:350,placeholder:"T\xecm ki\u1ebfm..."},stateStoring:{type:"localStorage",enabled:!0,storageKey:this.props.gridName},columnChooser:{enabled:!0,title:"Ch\u1ecdn c\u1ed9t",mode:"select",emptyPanelText:"Kh\xf4ng c\xf3 c\u1ed9t n\xe0o"},columnResizingMode:"nextColumn",allowColumnResizing:!0,columnAutoWidth:!0},a=Object.assign({},n,this.props.customEditing?{editing:{allowAdding:!0,allowUpdating:!0,allowDeleting:!0,mode:"row",confirmDelete:!0,selectTextOnEditStart:!0,useIcons:!0}}:{},this.props,{onSelectionChanged:this.onSelectionChanged,onToolbarPreparing:this.onToolbarPreparing,onInitialized:function(t){var n;null===(n=t.element)||void 0===n||n.classList.add("dx-datagrid-smart"),void 0!==e.props.onInitialized&&e.props.onInitialized(t)}});return s.a.createElement(u.a,Object.assign({ref:function(t){return e.dataGrid=t||void 0}},a),this.props.children,!0===this.props.customEditing?s.a.createElement(d.Editing,a.editing):null,s.a.createElement(d.Paging,{defaultPageSize:10}),s.a.createElement(d.Pager,{showPageSizeSelector:!0,showNavigationButtons:!0,visible:!0,showInfo:!0,allowedPageSizes:[5,10,25,50,100]}))}}]),n}(c.Component)},519:function(e,t,n){"use strict";var a=n(3),o=n(5),i=n(7),r=n(6),l=n(125),c=n(135),s=function(e){Object(i.a)(n,e);var t=Object(r.a)(n);function n(){return Object(a.a)(this,n),t.call(this,"id","Documentary")}return Object(o.a)(n,[{key:"GetAspNetDataSourceBook",value:function(e){return c.createStore({key:this.keyExpr,loadUrl:"".concat(this.baseUrl,"/api/services/app/").concat(this.entityName,"/get-book-devextreme"),loadMethod:"POST",onBeforeSend:function(t,n){void 0!==e&&e(t,n),n.headers=n.headers||{},abp.auth.getToken()&&(n.headers.Authorization="Bearer "+abp.auth.getToken()),n.headers[".AspNetCore.Culture"]=abp.utils.getCookieValue("Abp.Localization.CultureName"),n.headers["Abp.TenantId"]=abp.multiTenancy.getTenantIdCookie()}})}},{key:"GetAspNetDataSourceSearch",value:function(e){return c.createStore({key:this.keyExpr,loadUrl:"".concat(this.baseUrl,"/api/services/app/").concat(this.entityName,"/get-search-devextreme"),loadMethod:"POST",onBeforeSend:function(t,n){void 0!==e&&e(t,n),n.headers=n.headers||{},abp.auth.getToken()&&(n.headers.Authorization="Bearer "+abp.auth.getToken()),n.headers[".AspNetCore.Culture"]=abp.utils.getCookieValue("Abp.Localization.CultureName"),n.headers["Abp.TenantId"]=abp.multiTenancy.getTenantIdCookie()}})}}]),n}(l.b);t.a=new s},520:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(53),o=n.n(a);function i(e){var t=e.value;if(t){var n=o()(t,"DD/MM/YYYY");if(n.isValid())return n.format("DD/MM/YYYY")}return null}},521:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(3),o=n(5),i=n(7),r=n(6),l=n(0),c=n.n(l),s=n(488),d=n(54),u=n(522),h=n.n(u),p=function(e){Object(i.a)(n,e);var t=Object(r.a)(n);function n(e){var o;return Object(a.a)(this,n),(o=t.call(this,e)).state={isShow:!1,model:{},spinner:!1},o}return Object(o.a)(n,[{key:"open",value:function(e){var t="".concat(d.a.remoteServiceBaseUrl,"/report/").concat(e.url,"?"),n=[];for(var a in e.params)n.push("".concat(a,"=").concat(e.params[a]));t=t+n.join("&")+(!0===e.isPrint?"&autoprint=true":"");var o=Object.assign({},e,{url:t});this.setState({isShow:!0,model:o,spinner:!0})}},{key:"handleClose",value:function(){this.setState({isShow:!1,model:{}})}},{key:"render",value:function(){var e,t=this;return c.a.createElement(s.a,{show:this.state.isShow,onHide:function(){return t.setState({isShow:!1,model:{}})},dialogClassName:"modal-large-80vw",autoFocus:!0},c.a.createElement(s.a.Header,{closeButton:!0},c.a.createElement(s.a.Title,null)),c.a.createElement(s.a.Body,{className:"body-report"},c.a.createElement("iframe",{onLoad:function(e){t.setState({spinner:!1})},style:{width:"100%",height:"100%",display:this.state.spinner?"none":"block"},src:null===(e=this.state.model)||void 0===e?void 0:e.url}),c.a.createElement(h.a,{active:this.state.spinner,className:"loading-component",spinner:!0,text:"\u0110ang t\u1ea3i d\u1eef li\u1ec7u..."})),c.a.createElement(s.a.Footer,null,c.a.createElement("button",{type:"button",className:"btn btn-default",onClick:this.handleClose.bind(this)},c.a.createElement("i",{className:"fa fa-remove"})," \u0110\xf3ng")))}}]),n}(l.Component)},580:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(3),o=n(5),i=n(109),r=n(7),l=n(6),c=n(0),s=n.n(c),d=function(e){Object(r.a)(n,e);var t=Object(l.a)(n);function n(e){var o;return Object(a.a)(this,n),(o=t.call(this,e)).state={filterData:{year:(new Date).getFullYear(),type:o.props.type}},o.handleSelectChange=o.handleSelectChange.bind(Object(i.a)(o)),o.handleSearch=o.handleSearch.bind(Object(i.a)(o)),o.handlePrinting=o.handlePrinting.bind(Object(i.a)(o)),o}return Object(o.a)(n,[{key:"handleSearch",value:function(){void 0!==this.props.onSearch&&this.props.onSearch(this.state.filterData)}},{key:"handleSelectChange",value:function(e){var t=this.state.filterData||{},n=e.target.name,a=e.target.value;t[n]=a,this.setState({filterData:t})}},{key:"handlePrinting",value:function(){void 0!==this.props.onPrint&&this.props.onPrint()}},{key:"getData",value:function(){return this.state.filterData}},{key:"render",value:function(){for(var e=(new Date).getFullYear(),t=[],n=e;n>=e-20;n--)t.push(n);return s.a.createElement("div",{className:"form-inline",style:!0===this.props.useTemplate?{}:{padding:"13px"}},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",null,"N\u0103m:\xa0"),s.a.createElement("select",{onChange:this.handleSelectChange,name:"year",className:"form-control",style:{width:"120px"}},t.map((function(e){return s.a.createElement("option",{key:e,value:e},e)})))),s.a.createElement("button",{type:"button",style:{marginLeft:"10px"},onClick:this.handleSearch,className:"btn btn-primary"},s.a.createElement("i",{className:"fa fa-search"}),"\xa0T\xecm"),s.a.createElement("button",{type:"button",style:{marginLeft:"10px"},onClick:this.handlePrinting,className:"btn btn-info"},s.a.createElement("i",{className:"fa fa-print"}),"\xa0In"))}}]),n}(c.Component)},839:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return w}));var a,o=n(3),i=n(5),r=n(109),l=n(7),c=n(6),s=n(578),d=n(506),u=n(47),h=n(0),p=n.n(h),m=n(496),v=n(521),b=n(520),f=n(505),g=n(500),y=n(508),S=n(519),C=n(50),E=n(580),w=Object(u.b)(C.a.BreadcrumbStore,C.a.SessionStore)(a=Object(u.c)(a=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(e){var a,i;return Object(o.a)(this,n),(i=t.call(this,e)).dataGrid=void 0,i.filterComponent=void 0,i.printingComponent=void 0,i.store=S.a.GetAspNetDataSourceBook((function(e,t){var n,a=null===(n=i.filterComponent)||void 0===n?void 0:n.getData();t.data.data=JSON.stringify(a)})),null===(a=i.props.breadcrumbStore)||void 0===a||a.setItems(["S\u1ed5 v\u0103n b\u1ea3n","V\u0103n b\u1ea3n \u0111i"]),i.handleSearch=i.handleSearch.bind(Object(r.a)(i)),i.handleToolbarPreparing=i.handleToolbarPreparing.bind(Object(r.a)(i)),i.toolbarSearchRenderer=i.toolbarSearchRenderer.bind(Object(r.a)(i)),i.handlePrinting=i.handlePrinting.bind(Object(r.a)(i)),i}return Object(i.a)(n,[{key:"handleSearch",value:function(){var e;null===(e=this.dataGrid)||void 0===e||e.refresh()}},{key:"handleToolbarPreparing",value:function(e){var t,n,a,o;null===(t=e.toolbarOptions)||void 0===t||null===(n=t.items)||void 0===n||n.forEach((function(e){return e.location="after"})),null===(a=e.toolbarOptions)||void 0===a||null===(o=a.items)||void 0===o||o.unshift({location:"before",template:"searchTemplate"})}},{key:"toolbarSearchRenderer",value:function(){var e=this;return p.a.createElement(E.a,{type:f.a.DocumentaryAway,onPrint:this.handlePrinting,useTemplate:!0,onSearch:this.handleSearch,ref:function(t){return e.filterComponent=t||void 0}})}},{key:"handlePrinting",value:function(){var e,t,n,a=Object.assign({},null===(e=this.filterComponent)||void 0===e?void 0:e.getData(),{id:null===(t=this.props.sessionStore)||void 0===t?void 0:t.currentLogin.user.id});null===(n=this.printingComponent)||void 0===n||n.open({isPrint:!1,url:"book",params:a})}},{key:"render",value:function(){var e,t,n=this;return p.a.createElement("div",{id:"content"},1==(null===(e=this.props.breadcrumbStore)||void 0===e?void 0:e.useBigBreadcrum)?p.a.createElement("div",{className:"row"},p.a.createElement(m.a,{items:["S\u1ed5","S\u1ed5 v\u0103n b\u1ea3n \u0111i"],icon:"fa fa-fw fa-table"}),1==(null===(t=this.props.breadcrumbStore)||void 0===t?void 0:t.useBigBreadcrum)?p.a.createElement(m.c,null):null):null,p.a.createElement(m.d,null,p.a.createElement("div",{className:"row"},p.a.createElement("article",{className:"col-sm-12"},p.a.createElement(m.b,{id:"wid-id-list-van-ban-di",editbutton:!1,color:g.a.color,refresh:!0},p.a.createElement("header",null,p.a.createElement("span",{className:"widget-icon"},p.a.createElement("i",{className:"fa fa-table"})),p.a.createElement("h2",null,"Danh s\xe1ch v\u0103n b\u1ea3n \u0111i")),p.a.createElement("div",null,p.a.createElement("div",{className:"widget-body no-padding"},p.a.createElement(y.a,{ref:function(e){return n.dataGrid=e||void 0},gridName:"grid-so-van-ban-di",removeButtonAdd:!0,usePrint:!0,onPrinting:this.handlePrinting,keyExpr:"id",filterRow:{visible:!1},onToolbarPreparing:this.handleToolbarPreparing,customEditing:!1,dataSource:this.store,selectionMode:"none",onSelectionChanged:function(e){return console.log(e)},searchPanel:{visible:!1}},p.a.createElement(d.Column,{caption:"STT",dataType:"string",alignment:"center",cellRender:function(e){var t=e.rowIndex;return e.component.pageIndex()*e.component.pageSize()+(t+1)}}),p.a.createElement(d.Column,{dataField:"textNumber",caption:"S\u1ed1 \u0111i",dataType:"string"}),p.a.createElement(d.Column,{dataField:"code",caption:"S\u1ed1 v\u0103n b\u1ea3n",dataType:"string"}),p.a.createElement(d.Column,{dataField:"releaseDate",caption:"Ng\xe0y ban h\xe0nh",dataType:"datetime",format:"dd/MM/yyyy",cellRender:b.a}),p.a.createElement(d.Column,{dataField:"summaryContent",caption:"Tr\xedch y\u1ebfu",dataType:"string"}),p.a.createElement(d.Column,{dataField:"documentTypeId_Name",caption:"Lo\u1ea1i v\u0103n b\u1ea3n",dataType:"string",visible:!1}),p.a.createElement(d.Column,{dataField:"agencyIssuedId_Name",caption:"N\u01a1i ban h\xe0nh",dataType:"string"}),p.a.createElement(d.Column,{dataField:"receivedDate",caption:"Ng\xe0y g\u1eedi",dataType:"datetime",format:"dd/MM/yyyy",cellRender:b.a}),p.a.createElement(d.Column,{dataField:"receivedBy",caption:"Ng\u01b0\u1eddi g\u1eedi",dataType:"string"}),p.a.createElement(d.Column,{dataField:"performancePerson",caption:"N\u01a1i nh\u1eadn",dataType:"string"}),p.a.createElement(d.Column,{dataField:"description",caption:"Ghi ch\xfa",dataType:"string"}),p.a.createElement(d.Column,{dataField:"isProcessed",caption:"\u0110\xe3 x\u1eed l\xfd",dataType:"boolean",visible:!1}),p.a.createElement(s.Template,{name:"searchTemplate",render:this.toolbarSearchRenderer})))))))),p.a.createElement(v.a,{ref:function(e){return n.printingComponent=e||void 0}}))}}]),n}(h.Component))||a)||a}}]);